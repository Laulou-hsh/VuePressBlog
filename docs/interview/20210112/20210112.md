---
title: 面试官：ES6中数组新增了哪些扩展?
sidebar: auto
---
<style>
      .go-to-top {
        display: block !important;
      }
</style>

## 2021年12月12日的更新
>本文转载和摘抄于微信公众号“JS每日一题”的文章[面试官：ES6中数组新增了哪些扩展?](https://mp.weixin.qq.com/s/pNruGEkPsMr0uFdJglyztA)，本人除了转载不对此进行任何商业行为，侵权请联系，必删除。
***

## **面试官：ES6中数组新增了哪些扩展?**

<img class="custom" :src="$withBase('/assets/img/img20210112/ES6shuzu01.webp'')" alt="img">

### **一、扩展运算符的应用**  

ES6通过扩展元素符`...`，好比 `rest` 参数的逆运算，将一个数组转为用逗号分隔的参数序列。  
```JavaScript
console.log(...[1, 2, 3]);
// 1 2 3

console.log(1, ...[2, 3, 4], 5);
// 1 2 3 4 5

[...document.querySelectorAll('div')];
// [<div>, <div>, <div>]
```

主要用于函数调用的时候，将一个数组变为参数序列  
```JavaScript
function push(array, ...items) {
  array.push(...items);
}

function add(x, y) {
  return x + y;
}

const numbers = [4, 38];
add(...numbers); // 42
```

可以将某些数据结构转为数组  
```JavaScript
[...document.querySelectorAll('div')];
```
能够更简单实现数组复制
```JavaScript
const a1 = [1, 2];
const [...a2] = a1;
// [1,2]
```
数组的合并也更为简洁了  
```JavaScript
const arr1 = ['a', 'b'];
const arr2 = ['c'];
const arr3 = ['d', 'e'];
[...arr1, ...arr2, ...arr3]
// [ 'a', 'b', 'c', 'd', 'e' ]
```
注意：通过扩展运算符实现的是浅拷贝，修改了引用指向的值，会同步反映到新数组  

下面看个例子就清楚多了  
```JavaScript
const arr1 = ['a', 'b',[1,2]];
const arr2 = ['c'];
const arr3  = [...arr1,...arr2]
arr[1][0] = 9999 // 修改arr1里面数组成员值
console.log(arr[3]) // 影响到arr3,['a','b',[9999,2],'c']
```
扩展运算符可以与解构赋值结合起来，用于生成数组  
```JavaScript
const [...butLast, last] = [1, 2, 3, 4, 5];
// 报错

const [first, ...middle, last] = [1, 2, 3, 4, 5];
// 报错
```
可以将字符串转为真正的数组  
```JavaScript
[...'hello']
// [ "h", "e", "l", "l", "o" ]
```
定义了遍历器（Iterator）接口的对象，都可以用扩展运算符转为真正的数组  
```JavaScript

let nodeList = document.querySelectorAll('div');
let array = [...nodeList];

let map = new Map([
    [1, 'one'],
    [2, 'two'],
    [3, 'three'],
]);

let arr = [...map.keys()]; // [1, 2, 3]
```
如果对没有 Iterator 接口的对象，使用扩展运算符，将会报错  
```JavaScript
const obj = {a: 1, b: 2};
let arr = [...obj]; // TypeError: Cannot spread non-iterable object
```